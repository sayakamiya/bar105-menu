<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>ğŸ¸ GOG â€” ã‚ªãƒ¼ãƒ€ãƒ¼è¨ˆç®—ãƒ„ãƒ¼ãƒ«ï¼ˆã‚¹ãƒãƒ›/PCå¯¾å¿œï¼‰</title>

<style>
  :root{
    --gold:#c9a227;
    --muted:#d9cfc6;
    --bg-wood-1:#1b1410;
    --bg-wood-2:#3a2b24;
    --card-wood:#2a201b;
    --accent-dark:#201814;
    --gap:12px;
    --btn-size-desktop:40px;
    --btn-size-mobile:54px;
    --radius:10px;
    --danger:#b94a4a;
  }

  *{box-sizing:border-box;}
  html,body{height:100%;}
  body{
    margin:0;
    padding:18px;
    font-family:"Noto Sans JP",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
    background:linear-gradient(180deg,var(--bg-wood-1),var(--bg-wood-2));
    color:var(--muted);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    -webkit-user-select:none;
  }

  .container{
    max-width:1200px;
    margin:0 auto;
  }

  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:14px;
  }

  .title-wrap{
    display:flex;
    flex-direction:column;
  }

  h1{
    margin:0;
    color:var(--gold);
    font-size:18px;
  }

  .subtitle{
    font-size:13px;
    color:#bfb3a8;
  }

  .top-controls{
    display:flex;
    gap:8px;
    align-items:center;
    flex-wrap:wrap;
  }

  .btn{
    background:#3a2b24;
    color:var(--muted);
    border:1px solid #4d3d2d;
    border-radius:8px;
    padding:8px 10px;
    cursor:pointer;
    font-size:14px;
  }

  .btn:hover{
    background:#4a3a2e;
    color:var(--gold);
  }

  .small {padding:6px 8px; font-size:13px;}
  .muted{color:#bfb3a8; font-size:13px;}

  .menu-area{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:16px;
  }

  @media(max-width:900px){
    .menu-area{grid-template-columns:1fr;}
  }

  .menu-group{
    background:var(--card-wood);
    padding:12px;
    border-radius:var(--radius);
    box-shadow:0 6px 18px rgba(0,0,0,0.35);
  }

  .menu-group-header{
    display:flex;
    justify-content:space-between;
    gap:8px;
    align-items:center;
    margin-bottom:10px;
  }

  .menu-group h2{
    margin:0;
    font-size:16px;
    color:var(--gold);
    display:flex;
    gap:8px;
    align-items:center;
  }

  .menu-item{
    background:var(--accent-dark);
    border:1px solid #3c2f27;
    border-radius:8px;
    padding:10px;
    margin-bottom:12px;
    display:flex;
    flex-direction:column;
    gap:8px;
  }

  .title-row{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
  }

  .name{
    font-weight:700;
    font-size:15px;
  }

  .price{
    min-width:90px;
    text-align:right;
    white-space:nowrap;
  }

  .controls-row{
    display:flex;
    gap:8px;
    align-items:center;
    justify-content:space-between;
    flex-wrap:wrap;
  }

  .btn-row{
    display:flex;
    gap:8px;
    align-items:center;
    flex-wrap:wrap;
  }

  .btn-group-row{
    display:flex;
    gap:8px;
    align-items:center;
  }

  .qty-btn{
    width:var(--btn-size-desktop);
    height:var(--btn-size-desktop);
    display:inline-grid;
    place-items:center;
    border-radius:8px;
    background:#3a2b24;
    color:var(--muted);
    border:1px solid #4d3d2d;
    cursor:pointer;
    font-weight:700;
    touch-action: manipulation;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
  }

  .qty-btn:hover{
    background:#4a3a2e;
    color:var(--gold);
  }

  .qty{
    display:inline-block;
    min-width:52px;
    text-align:center;
    font-weight:800;
    font-size:16px;
  }

  .summary{
    margin-top:18px;
    background:var(--card-wood);
    border-radius:var(--radius);
    padding:14px;
    box-shadow:0 6px 18px rgba(0,0,0,0.25);
  }

  .order-line{
    display:flex;
    justify-content:space-between;
    margin-bottom:8px;
    font-size:15px;
  }

  .total{
    font-size:20px;
    text-align:right;
    color:#fff;
    margin-top:8px;
  }

  .control{
    margin-top:10px;
    display:flex;
    gap:8px;
    flex-wrap:wrap;
  }

  .control .btn{
    flex:1;
  }

  .delete-btn{
    background:transparent;
    border:1px solid rgba(255,255,255,0.06);
    color:var(--muted);
    padding:6px 8px;
    border-radius:6px;
    cursor:pointer;
  }

  .delete-btn:hover{
    background:rgba(185,74,74,0.08);
    color:var(--danger);
    border-color:var(--danger);
  }

  .sort-btn{
    background:transparent;
    border:1px dashed rgba(255,255,255,0.04);
    color:var(--muted);
    padding:6px 8px;
    border-radius:6px;
    cursor:pointer;
  }

  .sort-btn:hover{
    color:var(--gold);
    border-color:var(--gold);
  }

  @media (max-width:600px){
    body{padding:12px;}
    header{flex-direction:column; align-items:flex-start; gap:8px;}
    h1{font-size:17px;}
    .menu-area{grid-template-columns:1fr;}
    .menu-group{padding:10px;}
    .menu-item{padding:12px;}
    .title-row{flex-direction:row;}
    .price{min-width:72px; font-size:14px;}

    .btn-row{display:block; width:100%;}
    .btn-group-row{display:flex; gap:8px; width:100%;}
    .qty-btn{
      width:100%;
      height:var(--btn-size-mobile);
      border-radius:8px;
      font-size:16px;
      display:inline-flex;
      justify-content:center;
      align-items:center;
      -webkit-user-select:none;
      user-select:none;
      touch-action: manipulation;
    }

    .qty{
      display:block;
      text-align:center;
      font-size:18px;
      margin:6px 0;
      font-weight:800;
    }

    .controls-row{
      display:flex;
      gap:8px;
      justify-content:space-between;
      align-items:center;
      flex-direction:column;
    }

    .delete-btn{
      padding:8px 10px;
    }
  }

  .device-indicator{
    position:fixed;
    bottom:10px;
    right:10px;
    background:rgba(0,0,0,0.45);
    padding:6px 10px;
    border-radius:8px;
    font-size:12px;
    color:var(--muted);
    z-index:9999;
  }
</style>
</head>
<body>
<div class="container">

  <header>
    <div class="title-wrap">
      <h1>ğŸ¸ GOG â€” ã‚ªãƒ¼ãƒ€ãƒ¼è¨ˆç®—ãƒ„ãƒ¼ãƒ«ï¼ˆã‚¹ãƒãƒ›/PCå¯¾å¿œï¼‰</h1>
      <div class="subtitle">åº—èˆ—ã¯ URL ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§åˆ‡æ›¿ï¼š <code>?store=bar105</code> ãªã©</div>
    </div>

    <div class="top-controls">
      <button class="btn small" id="toggle-edit">ç·¨é›† OFF</button>
      <button class="btn small" id="theme-switch">ğŸ¨ ãƒ†ãƒ¼ãƒ</button>
      <button class="btn small" id="switch-device">ğŸ“±â‡†ğŸ’» åˆ‡æ›¿</button>
      <button class="btn small" id="copy-store-link">åº—èˆ—URLã‚’ã‚³ãƒ”ãƒ¼</button>
      <button class="btn small" id="add-item-btn">ï¼‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ </button>
      <button class="btn small" id="reset-default">åˆæœŸåŒ–</button>
    </div>
  </header>

  <div class="menu-area">

    <!-- é£Ÿã¹ç‰© -->
    <div class="menu-group" data-group="food">
      <div class="menu-group-header">
        <h2>ğŸ½ é£Ÿã¹ç‰©</h2>
        <div class="group-actions">
          <button class="sort-btn" id="sort-food">Â¥å®‰ã„é †</button>
        </div>
      </div>
      <div id="group-food"></div>
    </div>

    <!-- é£²ã¿ç‰© -->
    <div class="menu-group" data-group="drink">
      <div class="menu-group-header">
        <h2>ğŸ¹ é£²ã¿ç‰©</h2>
        <div class="group-actions">
          <button class="sort-btn" id="sort-drink">Â¥å®‰ã„é †</button>
        </div>
      </div>
      <div id="group-drink"></div>
    </div>

  </div>

  <!-- æ³¨æ–‡å†…å®¹ -->
  <div class="summary">
    <h2>ğŸ§¾ æ³¨æ–‡å†…å®¹</h2>
    <div id="order-list"></div>
    <div class="total" id="total-price">Â¥0</div>

    <div class="control">
      <button class="btn" id="copy-order">å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼</button>
      <button class="btn" id="copy-total">åˆè¨ˆã‚’ã‚³ãƒ”ãƒ¼</button>
      <button class="btn" id="reset-order">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>

    <div class="muted" style="margin-top:10px;">
      â€» ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ç·¨é›†ãƒ»è¿½åŠ ãƒ»å‰Šé™¤ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã•ã‚Œã¾ã™ï¼ˆåº—èˆ—ã”ã¨ã«åˆ†é›¢ï¼‰ã€‚<br>
      â€» ã‚¹ã‚¿ãƒƒãƒ•ã¯åº—èˆ—å°‚ç”¨ã® URLï¼ˆ?store=...ï¼‰ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚
    </div>
  </div>

</div>
<!-- â–¼ æ–°è¦è¿½åŠ ãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
<div id="add-dialog" class="dialog hidden">
  <div class="dialog-content">
    <h3>ï¼‹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ </h3>

    <label>å•†å“å</label>
    <input type="text" id="add-name" placeholder="ä¾‹ï¼šã‚«ãƒ—ãƒ¬ãƒ¼ã‚¼">

    <label>ä¾¡æ ¼ï¼ˆæ•°å­—ã®ã¿ï¼‰</label>
    <input type="number" id="add-price" placeholder="4500">

    <label>ã‚°ãƒ«ãƒ¼ãƒ—</label>
    <select id="add-group">
      <option value="food">é£Ÿã¹ç‰©</option>
      <option value="drink">é£²ã¿ç‰©</option>
    </select>

    <div class="dialog-buttons">
      <button id="add-save" class="btn">è¿½åŠ </button>
      <button id="add-cancel" class="btn">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
    </div>
  </div>
</div>

<!-- â–¼ å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
<div id="delete-dialog" class="dialog hidden">
  <div class="dialog-content">
    <h3>å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã„ã§ã™ã‹ï¼Ÿ</h3>
    <div id="delete-name" style="margin-bottom:10px;"></div>

    <div class="dialog-buttons">
      <button id="delete-ok" class="btn">å‰Šé™¤</button>
      <button id="delete-cancel" class="btn">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
    </div>
  </div>
</div>

<script>
//======================================================================
//  åº—èˆ—åˆ¥ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼å®šç¾©ï¼ˆå®Œå…¨ä¿®æ­£ç‰ˆï¼šgroup: food/drink ã‚’æ˜è¨˜ï¼‰
//======================================================================

const STORE_MENUS = {
  bar105: {
    name: "Bar105",
    items: [
      // --- é£Ÿã¹ç‰© ---
      { id:"b_food_ahijo", name:"ã‚¢ãƒ’ãƒ¼ã‚¸ãƒ§ï¼ˆè…¹50ï¼…ï¼‰", price:10000, group:"food" },
      { id:"b_food_apple", name:"ã‚Šã‚“ã”ã¨ã‚·ãƒŠãƒ¢ãƒ³ã®ã‚¹ãƒ†ã‚£ãƒƒã‚¯ï¼ˆè…¹40ï¼…ï¼‰", price:6000, group:"food" },
      { id:"b_food_caprese", name:"ã‚«ãƒ—ãƒ¬ãƒ¼ã‚¼ï¼ˆè…¹35ï¼…ï¼‰", price:4500, group:"food" },
      { id:"b_food_ham", name:"ç”Ÿãƒãƒ ï¼ˆè…¹35ï¼…ï¼‰", price:4500, group:"food" },
      { id:"b_food_nuts", name:"ãƒŸãƒƒã‚¯ã‚¹ãƒŠãƒƒãƒ„ï¼ˆè…¹20ï¼…ï¼‰", price:3000, group:"food" },

      // --- é£²ã¿ç‰© ---
      { id:"b_drink_tequilaSun", name:"ãƒ†ã‚­ãƒ¼ãƒ©ã‚µãƒ³ãƒ©ã‚¤ã‚ºï¼ˆæ°´åˆ†50ï¼…ï¼‰", price:15000, group:"drink" },
      { id:"b_drink_martini", name:"ãƒãƒ†ã‚£ãƒ¼ãƒ‹ï¼ˆæ°´åˆ†50ï¼…ï¼‰", price:15000, group:"drink" },
      { id:"b_drink_manhattan", name:"ãƒãƒ³ãƒãƒƒã‚¿ãƒ³ï¼ˆæ°´åˆ†50ï¼…ï¼‰", price:15000, group:"drink" },
      { id:"b_drink_mojito", name:"ãƒ¢ãƒ’ãƒ¼ãƒˆï¼ˆæ°´åˆ†40ï¼…ï¼‰", price:7000, group:"drink" },
      { id:"b_drink_whiskey", name:"ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ï¼ˆãƒ­ãƒƒã‚¯ï¼‰ï¼ˆæ°´åˆ†40ï¼…ï¼‰", price:7000, group:"drink" },
      { id:"b_drink_gintonic", name:"ã‚¸ãƒ³ãƒˆãƒ‹ãƒƒã‚¯ï¼ˆæ°´åˆ†35ï¼…ï¼‰", price:5500, group:"drink" },
      { id:"b_drink_kahlua", name:"ã‚«ãƒ«ãƒ¼ã‚¢ãƒŸãƒ«ã‚¯ï¼ˆæ°´åˆ†35ï¼…ï¼‰", price:5500, group:"drink" },
      { id:"b_drink_fuzzy", name:"ãƒ•ã‚¡ã‚¸ãƒ¼ãƒãƒ¼ãƒ–ãƒ«ï¼ˆæ°´åˆ†35ï¼…ï¼‰", price:5500, group:"drink" },
      { id:"b_drink_craftbeer", name:"ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«ï¼ˆæ°´åˆ†20ï¼…ï¼‰", price:4000, group:"drink" },
      { id:"b_drink_limited", name:"æœŸé–“é™å®šãƒ‰ãƒªãƒ³ã‚¯", price:30000, group:"drink" }
    ]
  },

  club210: {
    name: "CLUB210",
    items: [
      // --- é£Ÿã¹ç‰© ---
      { id:"c_food_dryfruit", name:"ãƒ‰ãƒ©ã‚¤ãƒ•ãƒ«ãƒ¼ãƒ„ï¼ˆè…¹50ï¼…ï¼‰", price:18000, group:"food" },
      { id:"c_food_olive", name:"ã‚ªãƒªãƒ¼ãƒ–ï¼ˆè…¹40ï¼…ï¼‰", price:12600, group:"food" },
      { id:"c_food_choco", name:"ç”Ÿãƒãƒ§ã‚³ï¼ˆè…¹35ï¼…ï¼‰", price:9000, group:"food" },

      // --- é£²ã¿ç‰© ---
      { id:"c_drink_champagne", name:"ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³ï¼ˆæ°´åˆ†50ï¼…ï¼‰", price:21000, group:"drink" },
      { id:"c_drink_tequila", name:"ãƒ†ã‚­ãƒ¼ãƒ©ï¼ˆæ°´åˆ†40ï¼…ï¼‰", price:12600, group:"drink" },
      { id:"c_drink_beer", name:"ãƒ“ãƒ¼ãƒ«ï¼ˆæ°´åˆ†35ï¼…ï¼‰", price:9000, group:"drink" }
    ]
  },

  lounge315: {
    name: "LOUNGE315",
    items: [
      // --- é£Ÿã¹ç‰© ---
      { id:"l_food_doria", name:"ãƒ‘ãƒ—ãƒªã‚«ã®ãƒ‰ãƒªã‚¢ï¼ˆè…¹50ï¼…ï¼‰", price:21000, group:"food" },
      { id:"l_food_canape", name:"ã‚«ãƒŠãƒƒãƒšï¼ˆãƒ”ãƒ³ãƒãƒ§ã‚¹ï¼‰ï¼ˆè…¹35ï¼…ï¼‰", price:10500, group:"food" },

      // --- é£²ã¿ç‰© ---
      { id:"l_drink_champagne", name:"ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³ï¼ˆæ°´åˆ†50ï¼…ï¼‰", price:21000, group:"drink" },
      { id:"l_drink_sparkling", name:"ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒªãƒ³ã‚°ãƒ¯ã‚¤ãƒ³ï¼ˆæ°´åˆ†40ï¼…ï¼‰", price:14700, group:"drink" },
      { id:"l_drink_brandy", name:"ãƒ–ãƒ©ãƒ³ãƒ‡ãƒ¼ï¼ˆæ°´åˆ†40ï¼…ï¼‰", price:14700, group:"drink" },
      { id:"l_drink_wine", name:"ãƒ¯ã‚¤ãƒ³ï¼ˆæ°´åˆ†35ï¼…ï¼‰", price:10500, group:"drink" }
    ]
  }
};
//======================================================================
//  URL ã‹ã‚‰åº—èˆ—ã‚’å–å¾—
//======================================================================
function getStoreKey() {
  const url = new URL(location.href);
  const s = url.searchParams.get("store");
  if (!s || !STORE_MENUS[s]) return "bar105"; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
  return s;
}

let CURRENT_STORE = getStoreKey();

//======================================================================
//  localStorage èª­ã¿è¾¼ã¿ï¼ˆåº—èˆ—ã”ã¨ã«åˆ†é›¢ï¼‰
//======================================================================
function loadMenuData() {
  const key = "menuData_" + CURRENT_STORE;
  const saved = localStorage.getItem(key);
  if (saved) {
    try {
      const obj = JSON.parse(saved);
      return obj;
    } catch {}
  }
  return JSON.parse(JSON.stringify(STORE_MENUS[CURRENT_STORE].items)); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
}

let menuItems = loadMenuData();

//======================================================================
//  localStorage ä¿å­˜
//======================================================================
function saveMenuData() {
  const key = "menuData_" + CURRENT_STORE;
  localStorage.setItem(key, JSON.stringify(menuItems));
}

//======================================================================
//  ãƒ¡ãƒ‹ãƒ¥ãƒ¼æç”»
//======================================================================
function renderMenu() {
  const foodBox = document.getElementById("group-food");
  const drinkBox = document.getElementById("group-drink");

  foodBox.innerHTML = "";
  drinkBox.innerHTML = "";

  menuItems.forEach(item => {
    const wrap = document.createElement("div");
    wrap.className = "item";

    let html = `
      <div>
        <div class="name">${item.name}</div>
        <div class="price">Â¥${item.price.toLocaleString()}</div>
      </div>

      <div>
        <button class="btn action-btn" data-id="${item.id}" data-delta="1">+1</button>
        <button class="btn action-btn" data-id="${item.id}" data-delta="5">+5</button>
        <button class="btn action-btn" data-id="${item.id}" data-delta="10">+10</button>
        <button class="btn action-btn" data-id="${item.id}" data-delta="50">+50</button>
        <br>
        <button class="btn action-btn" data-id="${item.id}" data-delta="-1">-1</button>
        <button class="btn action-btn" data-id="${item.id}" data-delta="-5">-5</button>
        <button class="btn action-btn" data-id="${item.id}" data-delta="-10">-10</button>
        <button class="btn action-btn" data-id="${item.id}" data-delta="-50">-50</button>
      </div>
    `;

    wrap.innerHTML = html;

    if (editMode) {
      const delBtn = document.createElement("button");
      delBtn.textContent = "å‰Šé™¤";
      delBtn.className = "btn small";
      delBtn.style.marginTop = "5px";
      delBtn.onclick = () => openDeleteDialog(item);
      wrap.appendChild(delBtn);
    }

    if (item.group === "food") foodBox.appendChild(wrap);
    else drinkBox.appendChild(wrap);
  });

  attachActionEvents();
}

//======================================================================
//  æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿
//======================================================================
let order = {};

//======================================================================
//  æ•°é‡ãƒœã‚¿ãƒ³
//======================================================================
function attachActionEvents() {
  document.querySelectorAll(".action-btn").forEach(btn => {
    btn.onclick = () => {
      const id = btn.dataset.id;
      const delta = Number(btn.dataset.delta);
      const item = menuItems.find(x => x.id === id);
      if (!item) return;

      order[id] = (order[id] || 0) + delta;
      if (order[id] < 0) order[id] = 0;
      renderOrder();
    };
  });
}

//======================================================================
//  æ³¨æ–‡ãƒªã‚¹ãƒˆæç”»
//======================================================================
function renderOrder() {
  const box = document.getElementById("order-list");
  box.innerHTML = "";

  let total = 0;

  Object.keys(order).forEach(id => {
    const qty = order[id];
    if (qty <= 0) return;

    const item = menuItems.find(x => x.id === id);
    if (!item) return;

    const div = document.createElement("div");
    div.className = "order-line";
    div.innerHTML = `
      <span>${item.name}</span>
      <span>${qty} Ã— Â¥${item.price.toLocaleString()} = 
        Â¥${(qty * item.price).toLocaleString()}
      </span>
    `;
    box.appendChild(div);

    total += qty * item.price;
  });

  document.getElementById("total-price").textContent = "Â¥" + total.toLocaleString();
}

//======================================================================
//  ã‚½ãƒ¼ãƒˆ
//======================================================================
document.getElementById("sort-food").onclick = () => {
  menuItems.sort((a,b)=> a.group==="food" && b.group==="food" ? a.price - b.price : 0);
  saveMenuData();
  renderMenu();
};
document.getElementById("sort-drink").onclick = () => {
  menuItems.sort((a,b)=> a.group==="drink" && b.group==="drink" ? a.price - b.price : 0);
  saveMenuData();
  renderMenu();
};

//======================================================================
//  ç·¨é›†ãƒ¢ãƒ¼ãƒ‰
//======================================================================
let editMode = false;
document.getElementById("toggle-edit").onclick = () => {
  editMode = !editMode;
  document.getElementById("toggle-edit").textContent = editMode ? "ç·¨é›† ON" : "ç·¨é›† OFF";
  renderMenu();
};

//======================================================================
//  ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ 
//======================================================================
document.getElementById("add-item-btn").onclick = () => {
  document.getElementById("add-dialog").classList.remove("hidden");
};
document.getElementById("add-cancel").onclick = () => {
  document.getElementById("add-dialog").classList.add("hidden");
};

document.getElementById("add-save").onclick = () => {
  const name = document.getElementById("add-name").value.trim();
  const price = Number(document.getElementById("add-price").value);
  const group = document.getElementById("add-group").value;

  if (!name || !price) return alert("å…¥åŠ›ãŒä¸è¶³ã—ã¦ã„ã¾ã™");

  const id = CURRENT_STORE + "_" + group + "_" + Date.now();

  menuItems.push({ id, name, price, group });
  saveMenuData();
  renderMenu();

  document.getElementById("add-dialog").classList.add("hidden");
};

//======================================================================
//  ãƒ¡ãƒ‹ãƒ¥ãƒ¼å‰Šé™¤
//======================================================================
let deleteTarget = null;

function openDeleteDialog(item) {
  deleteTarget = item;
  document.getElementById("delete-name").textContent = item.name;
  document.getElementById("delete-dialog").classList.remove("hidden");
}

document.getElementById("delete-cancel").onclick = () => {
  deleteTarget = null;
  document.getElementById("delete-dialog").classList.add("hidden");
};

document.getElementById("delete-ok").onclick = () => {
  if (!deleteTarget) return;

  menuItems = menuItems.filter(x => x.id !== deleteTarget.id);
  saveMenuData();
  renderMenu();

  document.getElementById("delete-dialog").classList.add("hidden");
  deleteTarget = null;
};

//======================================================================
//  æ³¨æ–‡ãƒªã‚»ãƒƒãƒˆ
//======================================================================
document.getElementById("reset-order").onclick = () => {
  order = {};
  renderOrder();
};

//======================================================================
//  ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰
//======================================================================
document.getElementById("copy-order").onclick = () => {
  let text = "";
  Object.keys(order).forEach(id => {
    const qty = order[id];
    if (qty <= 0) return;
    const item = menuItems.find(x=>x.id===id);
    if (!item) return;
    text += `${item.name} Ã— ${qty}\n`;
  });
  navigator.clipboard.writeText(text);
};

document.getElementById("copy-total").onclick = () => {
  navigator.clipboard.writeText(document.getElementById("total-price").textContent);
};

//======================================================================
// ãƒ‡ãƒã‚¤ã‚¹åˆ‡æ›¿ï¼ˆç–‘ä¼¼ï¼‰
//======================================================================
let deviceMode = "auto";
document.getElementById("switch-device").onclick = () => {
  document.body.classList.toggle("force-mobile");
  document.body.classList.toggle("force-pc");
};

//======================================================================
// åº—èˆ—URLã‚³ãƒ”ãƒ¼
//======================================================================
document.getElementById("copy-store-link").onclick = () => {
  const url = location.origin + location.pathname + "?store=" + CURRENT_STORE;
  navigator.clipboard.writeText(url);
  alert("åº—èˆ—URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
};

//======================================================================
// åˆæœŸåŒ–
//======================================================================
document.getElementById("reset-default").onclick = () => {
  if (!confirm("åˆæœŸåŒ–ã—ã¾ã™ã‹ï¼Ÿï¼ˆè¿½åŠ /å‰Šé™¤ã—ãŸãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚‚æ¶ˆãˆã¾ã™ï¼‰")) return;

  menuItems = JSON.parse(JSON.stringify(STORE_MENUS[CURRENT_STORE].items));
  saveMenuData();
  renderMenu();
};

//======================================================================
// åˆå›ãƒ­ãƒ¼ãƒ‰
//======================================================================
renderMenu();
renderOrder();
</script>

</body>
</html>
