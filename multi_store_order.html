<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>ğŸ¸ GOG â€” ã‚ªãƒ¼ãƒ€ãƒ¼è¨ˆç®—ãƒ„ãƒ¼ãƒ«ï¼ˆã‚¹ãƒãƒ›/PCå¯¾å¿œï¼‰</title>

<style>
  :root{
    --gold:#c9a227;
    --muted:#d9cfc6;
    --navy:#0b1530;
    --card-bg:#0f1726;
    --card-wood:#141418;
    --accent-dark:#201814;
    --gap:12px;
    --btn-size-desktop:40px;
    --btn-size-mobile:54px;
    --radius:12px;
    --danger:#b94a4a;
    --glass: rgba(255,255,255,0.03);
  }

  *{box-sizing:border-box;}
  html,body{height:100%;}
  body{
    margin:0;
    padding:20px;
    font-family:"Noto Sans JP", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg, var(--navy), #071028);
    color:var(--muted);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    -webkit-user-select:none;
  }

  .container{max-width:1200px; margin:0 auto;}

  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:18px;
  }

  .title-wrap{display:flex; flex-direction:column;}
  h1{margin:0; color:var(--gold); font-size:20px;}
  .subtitle{font-size:13px; color:#d6c99a;}

  .top-controls{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}
  .btn{
    background: linear-gradient(180deg,#2b2330,#271f1b);
    color:var(--muted);
    border:1px solid rgba(255,255,255,0.04);
    border-radius:10px;
    padding:8px 10px;
    cursor:pointer;
    font-size:14px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.45);
  }
  .btn:hover{filter:brightness(1.05); color:var(--gold);}

  .small{padding:6px 8px; font-size:13px;}
  .muted{color:#bfb3a8; font-size:13px;}

  /* layout */
  .menu-area{display:grid; grid-template-columns:1fr 1fr; gap:18px;}
  @media (max-width:900px){ .menu-area{grid-template-columns:1fr;} }

  .menu-group{
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
    padding:14px;
    border-radius:var(--radius);
    box-shadow: 0 8px 28px rgba(0,0,0,0.45);
    border:1px solid rgba(255,255,255,0.02);
  }

  .menu-group-header{display:flex; justify-content:space-between; align-items:center; gap:8px; margin-bottom:12px;}
  .menu-group h2{margin:0; font-size:16px; color:var(--gold); display:flex; align-items:center; gap:8px;}

  .menu-item{
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.03));
    border-radius:10px;
    padding:12px;
    margin-bottom:12px;
    border:1px solid rgba(255,255,255,0.02);
    display:flex;
    flex-direction:column;
    gap:8px;
  }

  /* top-line: name + price horizontal */
  .top-line{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:8px;
  }
  .name{font-weight:700; font-size:15px; color:#fff;}
  .price{min-width:90px; text-align:right; white-space:nowrap; color:#efe9d6; font-weight:700;}

  .qty-label{font-size:13px; color:#d0c6b8; margin-top:2px;}

  .controls-row{display:flex; gap:8px; align-items:center; justify-content:space-between; flex-wrap:wrap;}

  .btn-row{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}
  .btn-group-row{display:flex; gap:8px; align-items:center;}

  .qty-btn{
    width:var(--btn-size-desktop);
    height:var(--btn-size-desktop);
    display:inline-grid;
    place-items:center;
    border-radius:8px;
    background:linear-gradient(180deg,#241b16,#3a2b24);
    color:var(--muted);
    border:1px solid rgba(255,255,255,0.03);
    cursor:pointer;
    font-weight:800;
    touch-action: manipulation;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
  }
  .qty-btn:hover{filter:brightness(1.08); color:var(--gold);}

  .qty{display:inline-block; min-width:56px; text-align:center; font-weight:800; font-size:16px; color:#fff;}

  .summary{
    margin-top:18px;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.03));
    border-radius:var(--radius);
    padding:14px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.35);
    border:1px solid rgba(255,255,255,0.02);
  }

  .order-line{display:flex; justify-content:space-between; margin-bottom:8px; font-size:15px; color:#efe9d6;}
  .total{font-size:20px; text-align:right; color:#fff; margin-top:8px;}

  .control{margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;}
  .control .btn{flex:1;}

  .delete-btn{background:transparent; border:1px solid rgba(255,255,255,0.04); color:var(--muted); padding:6px 8px; border-radius:8px; cursor:pointer;}
  .delete-btn:hover{background:rgba(185,74,74,0.08); color:var(--danger); border-color:var(--danger);}

  .sort-btn{background:transparent; border:1px dashed rgba(255,255,255,0.04); color:var(--muted); padding:6px 8px; border-radius:6px; cursor:pointer;}
  .sort-btn:hover{color:var(--gold); border-color:var(--gold);}

  /* mobile adjustments */
  @media (max-width:600px){
    body{padding:12px;}
    header{flex-direction:column; align-items:flex-start; gap:10px;}
    h1{font-size:18px;}
    .top-controls{width:100%; display:flex; gap:8px; flex-wrap:wrap;}
    .menu-area{grid-template-columns:1fr;}
    .menu-group{padding:10px;}
    .menu-item{padding:12px;}
    .price{min-width:68px; font-size:14px;}

    .btn-row{display:block; width:100%;}
    .btn-group-row{display:flex; gap:8px; width:100%;}
    .qty-btn{
      width:100%;
      height:var(--btn-size-mobile);
      border-radius:8px;
      font-size:16px;
      display:inline-flex;
      justify-content:center;
      align-items:center;
      -webkit-user-select:none;
      user-select:none;
      touch-action: manipulation;
    }
    .qty{display:block; text-align:center; font-size:18px; margin:8px 0; font-weight:900;}

    .controls-row{flex-direction:column; align-items:stretch;}
  }

  .device-indicator{
    position:fixed; bottom:10px; right:10px;
    background:rgba(0,0,0,0.45);
    padding:6px 10px; border-radius:8px;
    font-size:12px; color:var(--muted); z-index:9999;
  }

  /* dialog basics (simple) */
  .dialog{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.6); z-index:9998;}
  .dialog.hidden{display:none;}
  .dialog-content{background:linear-gradient(180deg,#0f1113,#141417); padding:16px; border-radius:12px; width:320px; color:var(--muted); border:1px solid rgba(255,255,255,0.02);}
  .dialog-content h3{margin-top:0; color:var(--gold); margin-bottom:10px;}
  .dialog-content input, .dialog-content select{width:100%; padding:8px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:var(--muted); margin-bottom:8px;}
  .dialog-buttons{display:flex; gap:8px; justify-content:flex-end;}

  /* logo on top (uses uploaded path) */
  .top-logo{display:block; margin-bottom:8px; width:180px; height:auto; border-radius:8px;}
</style>
</head>
<body>
<div class="container">

  <!-- â–¼ ãƒ­ã‚´ï¼ˆ180pxå›ºå®šï¼‰ -->
  <img src="f0051aad-0e3d-4012-9f7d-e48313f57da7.png" class="top-logo" alt="GOG Logo">

  <header>
    <div class="title-wrap">
      <h1>ğŸ¸ GOG â€” ã‚ªãƒ¼ãƒ€ãƒ¼è¨ˆç®—ãƒ„ãƒ¼ãƒ«ï¼ˆã‚¹ãƒãƒ›/PCå¯¾å¿œï¼‰</h1>
      <div class="subtitle">åº—èˆ—ã¯ URL ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§åˆ‡æ›¿ï¼š <code>?store=bar105</code> ãªã©</div>
    </div>

    <div class="top-controls">
      <button class="btn small" id="toggle-edit">ç·¨é›† OFF</button>
      <button class="btn small" id="theme-switch">ğŸ¨ ãƒ†ãƒ¼ãƒ</button>
      <button class="btn small" id="switch-device">ğŸ“±â‡†ğŸ’» åˆ‡æ›¿</button>
      <button class="btn small" id="copy-store-link">åº—èˆ—URLã‚’ã‚³ãƒ”ãƒ¼</button>
      <button class="btn small" id="add-item-btn">ï¼‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ </button>
      <button class="btn small" id="reset-default">åˆæœŸåŒ–</button>
    </div>
  </header>

  <div class="menu-area">

    <!-- â–¼ é£Ÿã¹ç‰©ã‚°ãƒ«ãƒ¼ãƒ— -->
    <div class="menu-group" data-group="food">
      <div class="menu-group-header">
        <h2>ğŸ½ é£Ÿã¹ç‰©</h2>
        <button class="sort-btn" id="sort-food">Â¥ å®‰ã„é †</button>
      </div>

      <div id="group-food"></div>
    </div>

    <!-- â–¼ é£²ã¿ç‰©ã‚°ãƒ«ãƒ¼ãƒ— -->
    <div class="menu-group" data-group="drink">
      <div class="menu-group-header">
        <h2>ğŸ¹ é£²ã¿ç‰©</h2>
        <button class="sort-btn" id="sort-drink">Â¥ å®‰ã„é †</button>
      </div>

      <div id="group-drink"></div>
    </div>

  </div>

  <!-- â–¼ æ³¨æ–‡é›†è¨ˆ -->
  <div class="summary">
    <h2>ğŸ§¾ æ³¨æ–‡å†…å®¹</h2>
    <div id="order-list"></div>
    <div class="total" id="total-price">Â¥0</div>

    <div class="control">
      <button class="btn" id="copy-order">å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼</button>
      <button class="btn" id="copy-total">åˆè¨ˆã‚’ã‚³ãƒ”ãƒ¼</button>
      <button class="btn" id="reset-order">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>

    <div class="muted" style="margin-top:10px;">
      â€» ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ç·¨é›†ãƒ»è¿½åŠ ãƒ»å‰Šé™¤ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã•ã‚Œã¾ã™ï¼ˆåº—èˆ—ã”ã¨ã«åˆ†é›¢ï¼‰ã€‚<br>
      â€» ã‚¹ã‚¿ãƒƒãƒ•ã¯åº—èˆ—å°‚ç”¨ URLï¼ˆ?store=xxxxï¼‰ã‚’å…±æœ‰ã—ã¦ãã ã•ã„ã€‚
    </div>
  </div>

</div>
<!-- â–¼ æ–°è¦è¿½åŠ ãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
<div id="add-dialog" class="dialog hidden">
  <div class="dialog-content">
    <h3>ï¼‹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ </h3>

    <label>å•†å“å</label>
    <input type="text" id="add-name" placeholder="ä¾‹ï¼šã‚«ãƒ—ãƒ¬ãƒ¼ã‚¼">

    <label>ä¾¡æ ¼ï¼ˆåŠè§’æ•°å­—ï¼‰</label>
    <input type="number" id="add-price" placeholder="4500">

    <label>ã‚°ãƒ«ãƒ¼ãƒ—</label>
    <select id="add-group">
      <option value="food">é£Ÿã¹ç‰©</option>
      <option value="drink">é£²ã¿ç‰©</option>
    </select>

    <div class="dialog-buttons">
      <button id="add-save" class="btn">è¿½åŠ </button>
      <button id="add-cancel" class="btn">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
    </div>
  </div>
</div>

<!-- â–¼ å‰Šé™¤ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
<div id="delete-dialog" class="dialog hidden">
  <div class="dialog-content">
    <h3>å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</h3>

    <div id="delete-name" style="margin-bottom:10px;"></div>

    <div class="dialog-buttons">
      <button id="delete-ok" class="btn">å‰Šé™¤</button>
      <button id="delete-cancel" class="btn">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
    </div>
  </div>
</div>
<script>
//======================================================================
//  åº—èˆ—åˆ¥ãƒ¡ãƒ‹ãƒ¥ãƒ¼å®šç¾©ï¼ˆå®Œå…¨ä¿®æ­£ç‰ˆï¼šgroup ã‚’æ˜è¨˜ï¼‰
//======================================================================
const STORE_MENUS = {
  bar105: {
    name: "Bar105",
    items: [
      { id:"b_food_ahijo",    name:"ã‚¢ãƒ’ãƒ¼ã‚¸ãƒ§ï¼ˆè…¹50ï¼…ï¼‰", price:10000, group:"food" },
      { id:"b_food_apple",    name:"ã‚Šã‚“ã”ã¨ã‚·ãƒŠãƒ¢ãƒ³ã®ã‚¹ãƒ†ã‚£ãƒƒã‚¯ï¼ˆè…¹40ï¼…ï¼‰", price:6000, group:"food" },
      { id:"b_food_caprese",  name:"ã‚«ãƒ—ãƒ¬ãƒ¼ã‚¼ï¼ˆè…¹35ï¼…ï¼‰", price:4500, group:"food" },
      { id:"b_food_ham",      name:"ç”Ÿãƒãƒ ï¼ˆè…¹35ï¼…ï¼‰", price:4500, group:"food" },
      { id:"b_food_nuts",     name:"ãƒŸãƒƒã‚¯ã‚¹ãƒŠãƒƒãƒ„ï¼ˆè…¹20ï¼…ï¼‰", price:3000, group:"food" },

      { id:"b_drink_ts",      name:"ãƒ†ã‚­ãƒ¼ãƒ©ã‚µãƒ³ãƒ©ã‚¤ã‚ºï¼ˆæ°´åˆ†50ï¼…ï¼‰", price:15000, group:"drink" },
      { id:"b_drink_martini", name:"ãƒãƒ†ã‚£ãƒ¼ãƒ‹ï¼ˆæ°´åˆ†50ï¼…ï¼‰", price:15000, group:"drink" },
      { id:"b_drink_manhat",  name:"ãƒãƒ³ãƒãƒƒã‚¿ãƒ³ï¼ˆæ°´åˆ†50ï¼…ï¼‰", price:15000, group:"drink" },
      { id:"b_drink_mojito",  name:"ãƒ¢ãƒ’ãƒ¼ãƒˆï¼ˆæ°´åˆ†40ï¼…ï¼‰", price:7000, group:"drink" },
      { id:"b_drink_whisky",  name:"ã‚¦ã‚£ã‚¹ã‚­ãƒ¼ï¼ˆãƒ­ãƒƒã‚¯ï¼‰ï¼ˆæ°´åˆ†40ï¼…ï¼‰", price:7000, group:"drink" },
      { id:"b_drink_gint",    name:"ã‚¸ãƒ³ãƒˆãƒ‹ãƒƒã‚¯ï¼ˆæ°´åˆ†35ï¼…ï¼‰", price:5500, group:"drink" },
      { id:"b_drink_kahlua",  name:"ã‚«ãƒ«ãƒ¼ã‚¢ãƒŸãƒ«ã‚¯ï¼ˆæ°´åˆ†35ï¼…ï¼‰", price:5500, group:"drink" },
      { id:"b_drink_fuzzy",   name:"ãƒ•ã‚¡ã‚¸ãƒ¼ãƒãƒ¼ãƒ–ãƒ«ï¼ˆæ°´åˆ†35ï¼…ï¼‰", price:5500, group:"drink" },
      { id:"b_drink_craft",   name:"ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«ï¼ˆæ°´åˆ†20ï¼…ï¼‰", price:4000, group:"drink" },
      { id:"b_drink_limit",   name:"æœŸé–“é™å®šãƒ‰ãƒªãƒ³ã‚¯", price:30000, group:"drink" }
    ]
  },

  club210: {
    name: "CLUB210",
    items: [
      { id:"c_food_dry",    name:"ãƒ‰ãƒ©ã‚¤ãƒ•ãƒ«ãƒ¼ãƒ„ï¼ˆè…¹50ï¼…ï¼‰", price:18000, group:"food" },
      { id:"c_food_olive",  name:"ã‚ªãƒªãƒ¼ãƒ–ï¼ˆè…¹40ï¼…ï¼‰", price:12600, group:"food" },
      { id:"c_food_choco",  name:"ç”Ÿãƒãƒ§ã‚³ï¼ˆè…¹35ï¼…ï¼‰", price:9000, group:"food" },

      { id:"c_drink_champ", name:"ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³ï¼ˆæ°´åˆ†50ï¼…ï¼‰", price:21000, group:"drink" },
      { id:"c_drink_teq",   name:"ãƒ†ã‚­ãƒ¼ãƒ©ï¼ˆæ°´åˆ†40ï¼…ï¼‰", price:12600, group:"drink" },
      { id:"c_drink_beer",  name:"ãƒ“ãƒ¼ãƒ«ï¼ˆæ°´åˆ†35ï¼…ï¼‰", price:9000, group:"drink" }
    ]
  },

  lounge315: {
    name: "LOUNGE315",
    items: [
      { id:"l_food_doria",  name:"ãƒ‘ãƒ—ãƒªã‚«ã®ãƒ‰ãƒªã‚¢ï¼ˆè…¹50ï¼…ï¼‰", price:21000, group:"food" },
      { id:"l_food_canape", name:"ã‚«ãƒŠãƒƒãƒšï¼ˆãƒ”ãƒ³ãƒãƒ§ã‚¹ï¼‰ï¼ˆè…¹35ï¼…ï¼‰", price:10500, group:"food" },

      { id:"l_drink_champ",   name:"ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³ï¼ˆæ°´åˆ†50ï¼…ï¼‰", price:21000, group:"drink" },
      { id:"l_drink_spwine",  name:"ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒªãƒ³ã‚°ãƒ¯ã‚¤ãƒ³ï¼ˆæ°´åˆ†40ï¼…ï¼‰", price:14700, group:"drink" },
      { id:"l_drink_brandy",  name:"ãƒ–ãƒ©ãƒ³ãƒ‡ãƒ¼ï¼ˆæ°´åˆ†40ï¼…ï¼‰", price:14700, group:"drink" },
      { id:"l_drink_wine",    name:"ãƒ¯ã‚¤ãƒ³ï¼ˆæ°´åˆ†35ï¼…ï¼‰", price:10500, group:"drink" }
    ]
  }
};

//======================================================================
//  URL ã§åº—èˆ—é¸æŠ (?store=bar105)
//======================================================================
function getStoreKey(){
  const url = new URL(location.href);
  const s = url.searchParams.get("store");
  if(!s || !STORE_MENUS[s]) return "bar105";
  return s;
}
let CURRENT_STORE = getStoreKey();

//======================================================================
//  localStorage èª­ã¿è¾¼ã¿ï¼ä¿å­˜ï¼ˆåº—èˆ—ã”ã¨ã«ç‹¬ç«‹ï¼‰
//======================================================================
function loadMenuData(){
  const key = "menuData_" + CURRENT_STORE;
  const saved = localStorage.getItem(key);
  if(saved){
    try { return JSON.parse(saved); }
    catch(e){}
  }
  return JSON.parse(JSON.stringify(STORE_MENUS[CURRENT_STORE].items)); // deep copy
}

function saveMenuData(){
  const key = "menuData_" + CURRENT_STORE;
  localStorage.setItem(key, JSON.stringify(menuItems));
}

let menuItems = loadMenuData();   // ä½œæ¥­ç”¨
let order = {};                   // æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿

//======================================================================
//  ãƒ¡ãƒ‹ãƒ¥ãƒ¼æç”»
//======================================================================
function renderMenu(){
  const foodBox = document.getElementById("group-food");
  const drinkBox = document.getElementById("group-drink");

  foodBox.innerHTML = "";
  drinkBox.innerHTML = "";

  menuItems.forEach(item => {
    const wrap = document.createElement("div");
    wrap.className = "menu-item";

    wrap.innerHTML = `
      <div class="top-line">
        <div class="name">${item.name}</div>
        <div class="price">Â¥${item.price.toLocaleString()}</div>
      </div>

      <div class="qty-label">æ•°é‡ï¼š${order[item.id] || 0}</div>

      <div class="controls-row">
        <div class="btn-group-row">
          <button class="qty-btn action-btn" data-id="${item.id}" data-delta="1">+1</button>
          <button class="qty-btn action-btn" data-id="${item.id}" data-delta="5">+5</button>
          <button class="qty-btn action-btn" data-id="${item.id}" data-delta="10">+10</button>
          <button class="qty-btn action-btn" data-id="${item.id}" data-delta="50">+50</button>
        </div>

        <div class="btn-group-row">
          <button class="qty-btn action-btn" data-id="${item.id}" data-delta="-1">-1</button>
          <button class="qty-btn action-btn" data-id="${item.id}" data-delta="-5">-5</button>
          <button class="qty-btn action-btn" data-id="${item.id}" data-delta="-10">-10</button>
          <button class="qty-btn action-btn" data-id="${item.id}" data-delta="-50">-50</button>
        </div>
      </div>
    `;

    // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ãªã‚‰å‰Šé™¤ãƒœã‚¿ãƒ³è¿½åŠ 
    if(editMode){
      const del = document.createElement("button");
      del.textContent = "å‰Šé™¤";
      del.className = "delete-btn";
      del.onclick = () => openDeleteDialog(item);
      wrap.appendChild(del);
    }

    if(item.group === "food") foodBox.appendChild(wrap);
    else                      drinkBox.appendChild(wrap);
  });

  attachActionEvents();
  renderOrder();
}
//------------------------------------------------------------------
// æ•°é‡å¤‰æ›´ãƒœã‚¿ãƒ³
//------------------------------------------------------------------
function attachActionEvents(){
  document.querySelectorAll(".action-btn").forEach(btn=>{
    btn.onclick = () =>{
      const id = btn.dataset.id;
      const delta = Number(btn.dataset.delta);

      order[id] = (order[id] || 0) + delta;
      if(order[id] < 0) order[id] = 0;

      renderMenu();   // æ•°é‡ãƒ©ãƒ™ãƒ«ã‚‚æ›´æ–°
      renderOrder();
    };
  });
}

//------------------------------------------------------------------
// æ³¨æ–‡é›†è¨ˆ
//------------------------------------------------------------------
function renderOrder(){
  const box = document.getElementById("order-list");
  box.innerHTML = "";

  let total = 0;

  Object.keys(order).forEach(id=>{
    const qty = order[id];
    if(qty <= 0) return;

    const item = menuItems.find(x=>x.id===id);
    if(!item) return;

    total += qty * item.price;

    const line = document.createElement("div");
    line.className = "order-line";
    line.innerHTML = `
      <span>${item.name}</span>
      <span>${qty} Ã— Â¥${item.price.toLocaleString()} = Â¥${(qty*item.price).toLocaleString()}</span>
    `;
    box.appendChild(line);
  });

  document.getElementById("total-price").textContent =
    "Â¥" + total.toLocaleString();
}

//------------------------------------------------------------------
// ã‚½ãƒ¼ãƒˆï¼ˆä¾¡æ ¼æ˜‡é †ï¼‰
//------------------------------------------------------------------
document.getElementById("sort-food").onclick = () =>{
  menuItems.sort((a,b)=>{
    if(a.group==="food" && b.group==="food") return a.price - b.price;
    return 0;
  });
  saveMenuData();
  renderMenu();
};

document.getElementById("sort-drink").onclick = () =>{
  menuItems.sort((a,b)=>{
    if(a.group==="drink" && b.group==="drink") return a.price - b.price;
    return 0;
  });
  saveMenuData();
  renderMenu();
};

//------------------------------------------------------------------
// ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ ON/OFF
//------------------------------------------------------------------
let editMode = false;

document.getElementById("toggle-edit").onclick = ()=>{
  editMode = !editMode;
  document.getElementById("toggle-edit").textContent =
    editMode ? "ç·¨é›† ON" : "ç·¨é›† OFF";
  renderMenu();
};

//------------------------------------------------------------------
// ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ 
//------------------------------------------------------------------
document.getElementById("add-item-btn").onclick = ()=>{
  document.getElementById("add-dialog").classList.remove("hidden");
};

document.getElementById("add-cancel").onclick = ()=>{
  document.getElementById("add-dialog").classList.add("hidden");
};

document.getElementById("add-save").onclick = ()=>{
  const name = document.getElementById("add-name").value.trim();
  const price = Number(document.getElementById("add-price").value);
  const group = document.getElementById("add-group").value;

  if(!name || !price){
    alert("å…¥åŠ›ä¸è¶³ã§ã™");
    return;
  }

  const id = CURRENT_STORE + "_" + group + "_" + Date.now();

  menuItems.push({ id, name, price, group });
  saveMenuData();
  renderMenu();

  document.getElementById("add-dialog").classList.add("hidden");
};

//------------------------------------------------------------------
// ãƒ¡ãƒ‹ãƒ¥ãƒ¼å‰Šé™¤
//------------------------------------------------------------------
let deleteTarget = null;

function openDeleteDialog(item){
  deleteTarget = item;
  document.getElementById("delete-name").textContent = item.name;
  document.getElementById("delete-dialog").classList.remove("hidden");
}

document.getElementById("delete-cancel").onclick = ()=>{
  document.getElementById("delete-dialog").classList.add("hidden");
  deleteTarget = null;
};

document.getElementById("delete-ok").onclick = ()=>{
  if(!deleteTarget) return;

  menuItems = menuItems.filter(x => x.id !== deleteTarget.id);
  saveMenuData();
  renderMenu();

  document.getElementById("delete-dialog").classList.add("hidden");
  deleteTarget = null;
};

//------------------------------------------------------------------
// æ³¨æ–‡ãƒªã‚»ãƒƒãƒˆ
//------------------------------------------------------------------
document.getElementById("reset-order").onclick = ()=>{
  order = {};
  renderMenu();
  renderOrder();
};

//------------------------------------------------------------------
// ã‚³ãƒ”ãƒ¼ï¼ˆæ³¨æ–‡å†…å®¹ï¼åˆè¨ˆï¼‰
//------------------------------------------------------------------
document.getElementById("copy-order").onclick = ()=>{
  let text = "";
  Object.keys(order).forEach(id=>{
    const qty = order[id];
    if(qty<=0) return;
    const item = menuItems.find(x=>x.id===id);
    if(!item) return;
    text += `${item.name} Ã— ${qty}\n`;
  });
  navigator.clipboard.writeText(text);
};

document.getElementById("copy-total").onclick = ()=>{
  navigator.clipboard.writeText(
    document.getElementById("total-price").textContent
  );
};

//------------------------------------------------------------------
// ç–‘ä¼¼ãƒ‡ãƒã‚¤ã‚¹åˆ‡æ›¿ï¼ˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå¼·åˆ¶ï¼‰
//------------------------------------------------------------------
document.getElementById("switch-device").onclick = ()=>{
  document.body.classList.toggle("force-mobile");
  document.body.classList.toggle("force-pc");
};

//------------------------------------------------------------------
// åº—èˆ—URLã‚³ãƒ”ãƒ¼
//------------------------------------------------------------------
document.getElementById("copy-store-link").onclick = ()=>{
  const url = location.origin + location.pathname + "?store=" + CURRENT_STORE;
  navigator.clipboard.writeText(url);
  alert("åº—èˆ—URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
};

//------------------------------------------------------------------
// åˆæœŸãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã™
//------------------------------------------------------------------
document.getElementById("reset-default").onclick = ()=>{
  if(!confirm("åˆæœŸçŠ¶æ…‹ã«æˆ»ã—ã¾ã™ã‹ï¼Ÿï¼ˆè¿½åŠ /å‰Šé™¤åˆ†ã¯å…¨ã¦æ¶ˆãˆã¾ã™ï¼‰")) return;

  menuItems = JSON.parse(JSON.stringify(STORE_MENUS[CURRENT_STORE].items));
  saveMenuData();
  renderMenu();
};

//------------------------------------------------------------------
// åˆæœŸãƒ­ãƒ¼ãƒ‰
//------------------------------------------------------------------
renderMenu();
renderOrder();
</script>

</body>
</html>
